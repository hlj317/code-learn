<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>zepto-1.1.6-learn</title>
</head>

<body>
    <div id="a1">aaaa</div>
</body>
<script>
//首先把Zepto放到一个大的闭包中
var Zepto = (function(){

	//创建局部变量
	var undefined,
		key,
		$,
		classList,
		emptyArray = [],  //定义一个空数组
		slice = emptyArray.slice,    //定义数组slice原型方法
		filter = emptyArray.filter,  //定义数组filter原型方法
		document = window.document,  //定义document对象
		elementDisplay = {},         //定义一个元素对象
		classCache = {},             //定义一个缓存对象
		cssNumber = {"column-count":1,"columns":1,"line-height":1,"opacity":1,"z-index":1,"zoom":1},
		fragmentRE = /^\s*<(\w+|!)[^>]*>/,
        singleTagRE = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
		tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,
        rootNodeRE = /^(?:body|html)$/i,  
        capitalRE = /([A-Z])/g,
        methodAttributes = ['val','css','html','text','data','width','height','offset'],   //定义选择器方法
        adjacencyOperators = ['after','prepend','before','append'],         //定义选择器方法
        table = document.createElement('table'),    //创建一个table的dom节点
        tableRow = document.createElement('tr'),    //创建一个tr的dom节点
        containers = {

        	'tr' : document.createElement('tbody'),
        	'tbody' : table,
        	'thead' : table,
        	'tfoot' : table,
        	'td' : tableRow,
        	'th' : tableRow,
        	'*' : document.createElement('div')

        },

        readyRE = /complete|loaded|interactive/,

        simpleSelectorRE = /^[\w-]*$/,

        class2type = {},

        toString = class2type.toString,

        zepto = {},

        camelize,

        uniq,

        tempParent = document.createElement('div'),

        //节点属性映射表
        propMap = {

        	'tabindex' : 'tabIndex',
        	'readonly' : 'readOnly',
        	'for' : 'htmlFor',
        	'class' : 'className',
        	'maxLength' : 'maxLength',
        	'cellspacing' : 'cellSpacing',
        	'cellpadding' : 'cellPadding',
        	'rowspan' : 'rowSpan',
        	'colspan' : 'colSpan',
        	'usemap' : 'useMap',
        	'frameborder' : 'frameBorder',
        	'contenteditable' : 'contentEditable'

        },

        //定义数组判断原型方法
        isArray = Array.isArrya || function(object){return object instanceof Array};

        zepto.matches = function(element,selector){

        	if(!selector || !element || element.nodeType !== 1) return false;

        	var matchesSelector = element.webkitMatchesSelector || element.mozMatchesSelector ||
            element.oMatchesSelector || element.matchesSelector;

            if(matchesSelector) return matchesSelector.call(element,selector);

            var match,
            	parent = element.parentNode,
            	temp = !parent;

           if(temp) (parent = tempParent).appendChild(element);
           match = ~zepto.qsa(parent,selector).indexOf(element);

           temp && tempParent.removeChild(element);

           return match;

        }











})();

//把Zepto设为全局变量
window.Zepto = Zepto;

//判断window.$是否赋值，如果没有，则把Zepto对象赋给window.$
window.$ === undefined && (window.$ = Zepto)

</script>

</html>
